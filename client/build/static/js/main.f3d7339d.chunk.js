(this["webpackJsonprhythm-query"]=this["webpackJsonprhythm-query"]||[]).push([[0],{21:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(16),o=n.n(a),i=(n(21),n(4)),j=n.n(i),l=n(6),r=n(2),u=(n(23),n(24),n(5)),b=n.n(u),O=(n(43),n(0)),p=function(e){var t=Object(c.useState)("pop"),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(.5),i=Object(r.a)(o,2),u=i[0],p=i[1],x=Object(c.useState)(.5),h=Object(r.a)(x,2),d=h[0],v=h[1],m=Object(c.useState)(.5),f=Object(r.a)(m,2),g=f[0],y=f[1],k=Object(c.useState)(.5),N=Object(r.a)(k,2),S=N[0],w=N[1],C=Object(c.useState)(.5),T=Object(r.a)(C,2),_=T[0],D=T[1],A=Object(c.useState)(""),I=Object(r.a)(A,2),q=I[0],E=I[1],L=Object(c.useState)(""),P=Object(r.a)(L,2),F=P[0],z=P[1],R=Object(c.useState)(""),B=Object(r.a)(R,2),H=B[0],J=B[1],G=Object(c.useState)([]),M=Object(r.a)(G,2),U=M[0],K=M[1],Q=Object(c.useState)([]),V=Object(r.a)(Q,2),W=V[0],X=V[1],Y=Object(c.useState)(""),Z=Object(r.a)(Y,2),$=Z[0],ee=Z[1],te=Object(c.useState)(""),ne=Object(r.a)(te,2),ce=ne[0],se=ne[1],ae=Object(c.useState)([]),oe=Object(r.a)(ae,2),ie=oe[0],je=oe[1],le=Object(c.useState)(""),re=Object(r.a)(le,2),ue=re[0],be=re[1],Oe=Object(c.useState)(""),pe=Object(r.a)(Oe,2),xe=pe[0],he=pe[1],de=Object(c.useState)(!0),ve=Object(r.a)(de,2),me=ve[0],fe=ve[1],ge=Object(c.useState)(!0),ye=Object(r.a)(ge,2),ke=ye[0],Ne=ye[1],Se=Object(c.useState)(""),we=Object(r.a)(Se,2),Ce=we[0],Te=we[1],_e=Object(c.useState)(""),De=Object(r.a)(_e,2),Ae=De[0],Ie=De[1],qe=Object(c.useState)(""),Ee=Object(r.a)(qe,2),Le=Ee[0],Pe=Ee[1],Fe=Object(c.useState)(""),ze=Object(r.a)(Fe,2),Re=ze[0],Be=ze[1],He=Object(c.useState)(""),Je=Object(r.a)(He,2),Ge=(Je[0],Je[1]),Me=Object(c.useState)([]),Ue=Object(r.a)(Me,2),Ke=Ue[0],Qe=Ue[1];Object(c.useEffect)((function(){var t={code:e};console.log(t),b.a.post("http://localhost:3012/token",t).then(function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,E(t.data.accessToken);case 3:z(t.data.refreshToken),J(t.data.expiresIn),window.history.pushState({},null,"/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}),[]),Object(c.useEffect)((function(){if(F&&H){var e=setInterval((function(){var e={refreshToken:F};b.a.post("http://localhost:3012/refresh",e).then((function(e){E(e.data.access_token),J(e.data.expiresIn)})).catch((function(e){console.log(e),window.location("/")}))}),1e3*(H-60));return function(){return clearInterval(e)}}}),[F,H]),Object(c.useLayoutEffect)((function(){var e={accessToken:q};b.a.post("http://localhost:3012/top_artists",e).then((function(e){K(e.data),console.log(e.data)})).catch((function(e){console.log(e),window.alert(e)})),b.a.post("http://localhost:3012/top_tracks",e).then((function(e){X(e.data),console.log(e.data)})).catch((function(e){console.log(e)}))}),[q]),Object(c.useLayoutEffect)((function(){(function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.map((function(e){return e.uri}));case 2:return t=e.sent,e.next=5,Qe(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[ie]);var Ve=function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={genre:s,acousticness:u,danceability:d,energy:g,instrumentalness:S,valence:_,seed_artists:ue,seed_tracks:xe,accessToken:q},b.a.post("http://localhost:3012/query",n).then(function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.data.body),e.next=3,je(t.data.body.tracks);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),window.alert(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(e){e.preventDefault(),fe(!me)},Xe=function(e){e.preventDefault(),Ne(!ke)};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"title-subcontainer-main",children:[Object(O.jsx)("h1",{className:"title",children:"rhythm-"}),Object(O.jsx)("h1",{className:"style-2",children:"query"})]}),Object(O.jsx)("h4",{className:"mr-bottom",children:"Here are a list of your Top Artists on Spotify. Click on one to get songs similar to their style:"}),me?Object(O.jsx)("button",{onClick:function(e){return We(e)},children:"Click to see your Top Artists on Spotify"}):Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(e){return We(e)},children:"Click to hide list of Top Artists"}),Object(O.jsx)("div",{className:"top-artists",children:U&&U.map((function(e){var t=e.id,n=e.images[0].url,c=e.name,s=e.external_urls.spotify;return Object(O.jsxs)("div",{className:"single-container",children:[Object(O.jsx)("img",{className:"artist-song-img",onClick:function(e){return function(e,t,n,c,s){e.preventDefault(),be(t),Te(n),Pe(c),ee(s)}(e,t,n,c,s)},src:e.images[0].url,height:"150px",width:"150px"}),Object(O.jsx)("h4",{className:"album-song-text",children:e.name})]})}))})]}),Object(O.jsx)("h4",{className:"mr-bottom",children:"Here are a list of your Top Tracks on Spotify. Click on one to get songs similar to its style:"}),ke?Object(O.jsx)("button",{onClick:function(e){return Xe(e)},children:"Click to see your Top Tracks on Spotify"}):Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(e){return Xe(e)},children:"Click to hide list of Top Tracks"}),Object(O.jsx)("div",{className:"top-tracks",children:W&&W.map((function(e){var t=e.id,n=e.album.images[0].url,c=e.name,s=e.artists[0].name,a=e.external_urls.spotify;return Object(O.jsxs)("div",{className:"single-container",children:[Object(O.jsx)("img",{className:"artist-song-img",onClick:function(e){return function(e,t,n,c,s,a){e.preventDefault(),he(t),Ie(n),Be(c),Ge(s),se(a)}(e,t,n,c,s,a)},src:e.album.images[0].url,height:"150px",width:"150px"}),Object(O.jsx)("h4",{className:"album-song-maintext",children:e.name})]})}))})]}),Object(O.jsxs)("div",{className:"container-1",children:[Object(O.jsxs)("div",{className:"container-1-sub-1",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Genre: "}),Object(O.jsx)("input",{list:"genres",onChange:function(e){a(e.target.value)}}),Object(O.jsxs)("datalist",{id:"genres",children:[Object(O.jsx)("option",{value:"acoustic"}),Object(O.jsx)("option",{value:"afrobeat"}),Object(O.jsx)("option",{value:"alt-rock"}),Object(O.jsx)("option",{value:"alternative"}),Object(O.jsx)("option",{value:"ambient"}),Object(O.jsx)("option",{value:"anime"}),Object(O.jsx)("option",{value:"black-metal"}),Object(O.jsx)("option",{value:"bluegrass"}),Object(O.jsx)("option",{value:"blues"}),Object(O.jsx)("option",{value:"bossanova"}),Object(O.jsx)("option",{value:"brazil"}),Object(O.jsx)("option",{value:"breakbeat"}),Object(O.jsx)("option",{value:"cantopop"}),Object(O.jsx)("option",{value:"chicago-house"}),Object(O.jsx)("option",{value:"children"}),Object(O.jsx)("option",{value:"chill"}),Object(O.jsx)("option",{value:"club"}),Object(O.jsx)("option",{value:"comedy"}),Object(O.jsx)("option",{value:"country"}),Object(O.jsx)("option",{value:"dance"}),Object(O.jsx)("option",{value:"dancehall"}),Object(O.jsx)("option",{value:"death-metal"}),Object(O.jsx)("option",{value:"deep-house"}),Object(O.jsx)("option",{value:"detroit-techno"}),Object(O.jsx)("option",{value:"disco"}),Object(O.jsx)("option",{value:"disney"}),Object(O.jsx)("option",{value:"dub"}),Object(O.jsx)("option",{value:"dubstep"}),Object(O.jsx)("option",{value:"edm"}),Object(O.jsx)("option",{value:"electro"}),Object(O.jsx)("option",{value:"electronic"}),Object(O.jsx)("option",{value:"emo"}),Object(O.jsx)("option",{value:"folk"}),Object(O.jsx)("option",{value:"french"}),Object(O.jsx)("option",{value:"funk"}),Object(O.jsx)("option",{value:"garage"}),Object(O.jsx)("option",{value:"german"}),Object(O.jsx)("option",{value:"goth"}),Object(O.jsx)("option",{value:"groove"}),Object(O.jsx)("option",{value:"grunge"}),Object(O.jsx)("option",{value:"guitar"}),Object(O.jsx)("option",{value:"happy"}),Object(O.jsx)("option",{value:"hard-rock"}),Object(O.jsx)("option",{value:"hardcore"}),Object(O.jsx)("option",{value:"hardstyle"}),Object(O.jsx)("option",{value:"heavy-metal"}),Object(O.jsx)("option",{value:"hip-hop"}),Object(O.jsx)("option",{value:"holidays"}),Object(O.jsx)("option",{value:"house"}),Object(O.jsx)("option",{value:"indian"}),Object(O.jsx)("option",{value:"indie"}),Object(O.jsx)("option",{value:"indie-pop"}),Object(O.jsx)("option",{value:"iranian"}),Object(O.jsx)("option",{value:"j-dance"}),Object(O.jsx)("option",{value:"j-idol"}),Object(O.jsx)("option",{value:"j-pop"}),Object(O.jsx)("option",{value:"j-rock"}),Object(O.jsx)("option",{value:"jazz"}),Object(O.jsx)("option",{value:"k-pop"}),Object(O.jsx)("option",{value:"kids"}),Object(O.jsx)("option",{value:"latino"}),Object(O.jsx)("option",{value:"malay"}),Object(O.jsx)("option",{value:"mandopop"}),Object(O.jsx)("option",{value:"metal"}),Object(O.jsx)("option",{value:"metalcore"}),Object(O.jsx)("option",{value:"minimal-techno"}),Object(O.jsx)("option",{value:"opera"}),Object(O.jsx)("option",{value:"pagode"}),Object(O.jsx)("option",{value:"party"}),Object(O.jsx)("option",{value:"philippines-opm"}),Object(O.jsx)("option",{value:"piano"}),Object(O.jsx)("option",{value:"pop"}),Object(O.jsx)("option",{value:"power-pop"}),Object(O.jsx)("option",{value:"progressive-house"}),Object(O.jsx)("option",{value:"psych-rock"}),Object(O.jsx)("option",{value:"punk"}),Object(O.jsx)("option",{value:"punk-rock"}),Object(O.jsx)("option",{value:"r-n-b"}),Object(O.jsx)("option",{value:"rainy-day"}),Object(O.jsx)("option",{value:"reggae"}),Object(O.jsx)("option",{value:"reggaeton"}),Object(O.jsx)("option",{value:"rock"}),Object(O.jsx)("option",{value:"road-trip"}),Object(O.jsx)("option",{value:"rock-n-roll"}),Object(O.jsx)("option",{value:"rockabilly"}),Object(O.jsx)("option",{value:"romance"}),Object(O.jsx)("option",{value:"sad"}),Object(O.jsx)("option",{value:"salsa"}),Object(O.jsx)("option",{value:"samba"}),Object(O.jsx)("option",{value:"show-tunes"}),Object(O.jsx)("option",{value:"singer-songwriter"}),Object(O.jsx)("option",{value:"ska"}),Object(O.jsx)("option",{value:"sleep"}),Object(O.jsx)("option",{value:"soul"}),Object(O.jsx)("option",{value:"soundtracks"}),Object(O.jsx)("option",{value:"spanish"}),Object(O.jsx)("option",{value:"study"}),Object(O.jsx)("option",{value:"summer"}),Object(O.jsx)("option",{value:"swedish"}),Object(O.jsx)("option",{value:"synth-pop"}),Object(O.jsx)("option",{value:"tango"}),Object(O.jsx)("option",{value:"techno"}),Object(O.jsx)("option",{value:"trance"}),Object(O.jsx)("option",{value:"trip-hop"}),Object(O.jsx)("option",{value:"turkish"}),Object(O.jsx)("option",{value:"work-out"}),Object(O.jsx)("option",{value:"world-music"})]})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Acousticness: "}),Object(O.jsx)("input",{type:"range",value:u,onChange:function(e){!function(e){p(e.target.value)}(e)},min:"0",max:"1",step:"0.1"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Danceability: "}),Object(O.jsx)("input",{type:"range",value:d,onChange:function(e){v(e.target.value)},min:"0",max:"1",step:"0.1"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Energy: "}),Object(O.jsx)("input",{type:"range",value:g,onChange:function(e){y(e.target.value)},min:"0",max:"1",step:"0.1"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Instrumentalness: "}),Object(O.jsx)("input",{type:"range",value:S,onChange:function(e){w(e.target.value)},min:"0",max:"1",step:"0.1"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Positivity: "}),Object(O.jsx)("input",{type:"range",value:_,onChange:function(e){D(e.target.value)},min:"0",max:"1",step:"0.1"})]})]}),Ce?Object(O.jsxs)("div",{className:"container-1-sub-2",children:[Object(O.jsx)("h3",{children:"Chosen Seed Artist"}),Object(O.jsx)("a",{href:$,target:"_blank",children:Object(O.jsx)("img",{className:"artist-song-img",src:Ce,height:"300px",width:"300px"})}),Object(O.jsx)("h3",{children:Le})]}):Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"container-1-sub-2",children:[Object(O.jsx)("h3",{children:"Chosen Seed Artist"}),Object(O.jsx)("a",{href:"#",children:Object(O.jsx)("img",{className:"artist-song-img",src:Ce,height:"300px",width:"300px"})}),Object(O.jsx)("h3",{children:Le})]})}),Ae?Object(O.jsxs)("div",{className:"container-1-sub-3",children:[Object(O.jsx)("h3",{children:"Chosen Seed Track"}),Object(O.jsx)("a",{href:ce,target:"_blank",children:Object(O.jsx)("img",{className:"artist-song-img",src:Ae,height:"300px",width:"300px"})}),Object(O.jsx)("h3",{children:Re})]}):Object(O.jsxs)("div",{className:"container-1-sub-3",children:[Object(O.jsx)("h3",{children:"Chosen Seed Track"}),Object(O.jsx)("a",{href:"#",children:Object(O.jsx)("img",{className:"artist-song-img",src:Ae,height:"300px",width:"300px"})}),Object(O.jsx)("h3",{children:Re})]})]})]}),Object(O.jsx)("div",{className:"center-button-div",children:Object(O.jsx)("button",{className:"button-margin",onClick:function(e){Ve(e)},children:"Search"})}),ie.length>1?Object(O.jsxs)("div",{className:"center-button-div",children:[Object(O.jsx)("h3",{className:"song-list-title",children:"Recommended Tracks:"}),Object(O.jsx)("button",{className:"button-margin",onClick:function(e){return function(e){e.preventDefault(),console.log(Ke);var t={accessToken:q,track_uris:Ke,playlist_name:"rhythm-query: ("+s+") "+Le+" + "+Re};b.a.post("http://localhost:3012/playlist",t).then((function(e){console.log(e)})).then((function(){window.alert("New Playlist added to your Spotify account!")}))}(e)},children:"Add Playlist with Recommended Tracks"})]}):Object(O.jsx)("div",{}),Object(O.jsx)("div",{className:"song-list",children:ie&&ie.map((function(e){var t=e.id;return Object(O.jsxs)("div",{id:t,children:[Object(O.jsx)("a",{href:e.external_urls.spotify,target:"_blank",children:Object(O.jsx)("img",{className:"artist-song-img",src:e.album.images[1].url})}),Object(O.jsx)("h3",{children:e.name}),Object(O.jsx)("h4",{className:"mr-bottom",children:e.artists[0].name})]})}))})]})},x=(n(45),function(){return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"title-container",children:[Object(O.jsxs)("div",{className:"title-subcontainer",children:[Object(O.jsx)("h1",{className:"title",children:"rhythm-"}),Object(O.jsx)("h1",{className:"style-2",children:"query"})]}),Object(O.jsx)("div",{children:Object(O.jsx)("h3",{children:"Find recommendations for songs similar to your favourite tracks from your favourite artists"})})]}),Object(O.jsx)("div",{className:"login-button-div",children:Object(O.jsx)("a",{href:"http://localhost:3012/login",className:"login-button",children:"Login to Spotify"})})]})}),h=new URLSearchParams(window.location.search).get("code");var d=function(){return Object(O.jsx)("div",{children:h?Object(O.jsx)(p,{code:h}):Object(O.jsx)(x,{})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),a(e),o(e)}))};o.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(d,{})}),document.getElementById("root")),v()}},[[46,1,2]]]);
//# sourceMappingURL=main.f3d7339d.chunk.js.map